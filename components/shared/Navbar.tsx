"use client";

import { useSession, signOut } from "@/lib/auth/auth-client";
import { useRouter } from "next/navigation";
import { Button } from "@/components/ui/button";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
import Link from "next/link";
import { toast } from "sonner";

export default function Navbar() {
  const { data: session } = useSession();
  const router = useRouter();

  return (
    <nav className="w-full p-4 flex justify-around items-center border-b border-white/10">
      <Link href="/" className="flex items-center gap-2">
        <svg
          width="800"
          height="800"
          viewBox="0 0 800 800"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="w-auto h-6"
        >
          <path
            d="M15.7956 543.126C6.50096 549.689 1.8765 555.864 1.21924 562.565C0.601813 568.892 3.61618 575.528 10.4411 582.849C21.874 595.597 34.8387 606.749 49.0133 616.027C103.559 650.15 158.534 683.5 212.419 715.161C244.028 733.731 276.562 751.833 308.021 769.343C321.598 776.892 335.163 784.463 348.72 792.058C355.565 796.401 363.332 798.908 371.336 799.362C376.468 799.355 381.507 797.928 385.938 795.234C409.839 781.062 435.771 765.374 465.221 747.261L504.634 723.019C593.596 668.3 685.59 611.746 775.897 555.795C789.052 547.646 796.591 535.608 796.581 522.769C796.581 509.685 788.796 497.391 775.253 489.034C763.611 481.848 751.658 474.835 739.004 467.427C734.476 464.771 729.819 462.039 724.989 459.195C730.559 454.946 735.99 450.818 741.284 446.808C755.512 435.999 768.949 425.793 782.264 415.452C794.041 406.309 800.156 394.714 799.475 382.804C798.781 370.572 791.057 359.445 777.736 351.466C766.018 344.445 754.34 337.359 742.22 329.993L729.603 322.342C733.985 318.879 738.317 315.471 742.599 312.116C755.309 302.139 767.323 292.722 779.213 282.751C789.092 274.474 794.048 264.32 793.168 254.155C792.259 243.648 785.284 234.204 773.523 227.562C757.659 218.603 743.399 210.439 729.533 201.269L723.505 197.276C624.132 131.51 521.377 63.5065 412.922 9.57067C387.777 -2.93842 365.832 -1.55328 343.877 13.9238C316.074 33.522 288.413 52.4689 260.164 71.759C230.434 92.0765 200.694 112.364 170.943 132.622C122.66 165.522 72.7315 199.562 23.7191 233.183C10.5274 242.239 4.01744 250.883 3.23072 260.4C2.46723 269.668 7.44018 279.41 18.4311 290.184C31.1727 302.197 44.542 313.465 58.4776 323.936C63.8718 328.151 69.263 332.365 74.5775 336.663C78.1061 339.517 81.817 342.135 85.7506 344.909L87.742 346.323C81.1693 351.49 74.703 356.543 68.3428 361.485C51.1644 374.87 34.9356 387.518 19.0121 400.872C7.83868 410.222 2.65997 418.579 2.70313 427.13C2.7496 435.743 8.10063 444.117 19.543 453.498C28.5056 460.844 38.1718 467.452 47.5196 473.845C53.1627 477.699 58.9851 481.685 64.5652 485.772C68.3295 488.653 71.9408 491.746 75.3838 495.036C76.1738 495.767 76.9738 496.508 77.7971 497.256C71.9879 501.578 66.289 505.845 60.7013 510.049C45.2988 521.637 30.7433 532.563 15.7956 543.126ZM153.222 538.901C182.102 555.663 211.978 572.996 241.468 589.616C256.738 598.212 272.383 606.614 287.53 614.742C307.115 625.249 327.364 636.11 346.878 647.469C366.599 658.943 386.506 659.68 411.439 649.859C477.586 623.812 537.248 586.981 586.854 554.392C610.619 538.78 633.656 523.015 658.071 506.333C668.395 499.275 678.828 492.158 689.371 484.979L746.373 521.53C731.86 530.853 717.464 540.12 703.183 549.332C667.372 572.408 633.556 594.205 598.818 616.134C568.481 635.289 537.553 654.621 507.641 673.315C468.139 698.008 427.273 723.531 387.273 748.989C379.681 753.807 374.639 752.595 367.422 748.463C342.081 733.918 316.727 719.396 291.364 704.903C240.947 676.054 188.818 646.229 137.671 616.66C117.518 605.01 97.7144 592.896 76.7484 580.068C68.3833 574.953 59.8651 569.741 51.1116 564.432L116.287 517.502C128.638 524.636 140.945 531.77 153.21 538.901H153.222ZM694.539 291.388C659.591 317.044 626.582 341.28 592.046 364.2C551.996 390.783 510.493 416.567 470.353 441.502C447.226 455.867 423.312 470.724 399.923 485.575C390.678 491.462 383.966 491.324 374.313 485.093C325.186 453.405 275.111 421.44 226.676 390.548C186.132 364.674 144.21 337.907 103.072 311.462C89.7938 302.925 77.1796 293.674 63.8319 283.874C58.9632 280.306 54.0384 276.714 49.0571 273.096C60.4142 265.015 71.5823 257.037 82.5609 249.162C109.914 229.581 135.753 211.067 162.229 192.829C193.18 171.493 224.808 150.042 255.397 129.301C285.173 109.107 315.958 88.2268 346.098 67.4684L347.06 66.8035C388.332 38.3706 388.335 38.381 432.537 62.8346C520.564 111.524 610.486 168.753 724.113 248.4C727.299 250.633 730.393 253.207 734.31 256.469C735.488 257.449 736.743 258.492 738.094 259.607C723.296 270.27 708.69 280.988 694.529 291.388H694.539ZM125.186 369.339C133.773 375.254 142.374 381.225 150.989 387.247C171.457 401.502 192.619 416.248 213.927 430.143C247.165 451.829 281.179 473.481 314.082 494.42C332.893 506.395 351.704 518.395 370.512 530.42C387.376 541.246 402.602 534.517 412.59 528.518C425.613 520.695 438.649 512.892 451.701 505.114C492.61 480.685 534.914 455.421 575.9 429.464C611.402 406.981 645.122 382.738 682.373 355.66C692.043 348.629 698.274 348.515 707.064 355.161C716.873 362.582 727.173 369.384 738.068 376.584C741.62 378.925 745.261 381.343 748.989 383.826C741.404 389.447 734.035 395.015 726.785 400.494C708.461 414.347 691.15 427.424 673.005 439.351C592.391 492.397 521.407 538.105 455.99 579.092C443.024 586.721 429.52 593.308 415.595 598.801C408.093 601.99 400.328 605.287 392.863 608.879C387.751 611.507 382.084 612.74 376.395 612.456C370.702 612.169 365.175 610.378 360.332 607.251C313.087 580.674 265.799 554.181 218.468 527.774C171.822 501.682 125.199 475.566 78.5971 449.422C70.0825 444.633 61.8103 438.901 53.0369 432.837C49.9962 430.731 46.8722 428.57 43.6191 426.361L125.186 369.339Z"
            fill="#86EAD4"
          />
        </svg>

        <h1 className="text-2xl font-bold">SubTrack</h1>
      </Link>
      {session ? (
        <>
          <Button onClick={() => {
            signOut()
            toast.success("Signed out")
            router.push("/")
            router.refresh()
          }}>Sign Out</Button>
        </>
      ) : (
        <div className="flex gap-2">
          <Link href="/login"><Button>Sign In</Button></Link>
          <Link href="/register"><Button variant="outline">Sign Up</Button></Link>
        </div>
      )}
    </nav>
  );
}
